<!DOCTYPE html>
<html lang="en-GB" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:substituteby="fragments/head::head (#{profile.profile})">
	<title>Profile</title>
	<link href="../../../static/css/main.css" rel="stylesheet"/>
	<script src="../../../static/js/lib/jquery-1.10.2.min.js"></script>
	<script src="../../../static/js/main.js"></script>
</head>
<body>
<style type="text/css">
	.exp-period > input {width: 50px !important;}
	.exp-period > select {width: 75px !important;}
</style>
<div id="global-container">
	<header th:substituteby="fragments/header::header" class="header">
		<div class="header-floating-content">
			<div id="select-language-box">
				<label for="select-language"
					style="color: #333; font-weight: lighter; vertical-align: inherit;">Select language</label>
				<select id="select-language">
					<option value="en">English</option>
					<option value="it">Italian</option>
				</select>
			</div>
			<div id="userInSession">
				<img title="User in session" src="../../../static/images/user-icon.png"/>
				<span id="userLoggedIn">Username</span>
			</div>
			<div id="logoutLink">
				<img id="logout" title="Logout" src="../../../static/images/logout-icon.png"/>
			</div>
		</div>
		<script th:inline="javascript">
			$("#logoutLink").click(function() {
				window.location = "../login/login.html";
			});
		</script>
	</header>
	<div id="container">
		<div th:substituteby="fragments/navbar::navbar" class="navbar">
			<div id="nav-f2inf-box-space"></div>
			<ul id="nav">
				<li><a href="../homePage.html" class="nav-item-selected">Home</a></li>
				<li><a href="../user/users.html">User Management</a></li>
				<li><a href="../consultant/consultants.html">Consultant Management</a></li>
			</ul>
		</div>
		<div id="content">
			<h2 class="header-underlined">Profile</h2>
			<input type="hidden" id="consultantId" th:value="${session.consultantId}"/>
			<div class="data-list-container">
				<header>
					<h3 th:text="|${consultantFullName}&nbsp;(${consultantAge}&nbsp;#{global.yearsold})|">
						Rossi Mario (30 years old)
					</h3>
				</header>
				<div class="data-list-container-mindetails">
					<div class="float-left">
						<span th:text="|#{consultant.consultantno}: ${consultantNo}|">
							Consultant No. 201311529-C5A707AD0713
						</span>
						<span>&nbsp;|&nbsp;</span>
						<span th:text="|#{consultant.registrationdate}: ${{registrationDate}}|">
							Registration date: 01-01-2013
						</span>
					</div>
				</div>
			</div>
			<div id="experienceSection" class="data-section">
				<h2 th:text="#{experience.title}">Experience</h2>
				<a id="addNewExperience" href="javascript:void(0);" class="add-new-button">
					<span th:text="#{experience.add}">Add new work experience</span>
				</a>
				<script th:inline="javascript">
					$("#addNewExperience").click(function() {
						$(this).removeClass("add-new-button").addClass("add-new-button-disabled");
						$("#newExperienceForm").removeClass("invisible");
						$("#companyName").focus();
					});
				</script>
				<div id="newExperienceForm" class="invisible" style="position: relative;">
					<div class="form-container">
						<form th:action="@{/consultant/profile/addExperience}" th:object="${experienceModel}"
									method="post" action="profileDataRegistration.html">
							<div class="form-row">
								<label for="companyName" th:text="#{experience.companyname}" class="form-label label-required">Company name</label>
								<input type="text" id="companyName" th:field="*{companyName}"/>
							</div>
							<div class="form-row">
								<label for="function" th:text="#{experience.function}" class="form-label label-required">Function</label>
								<input type="text" id="function" th:field="*{function}"/>
							</div>
							<div class="form-row">
								<label for="location" th:text="#{experience.location}" class="form-label">Location</label>
								<input type="text" id="location" th:field="*{location}"/>
							</div>
							<div class="form-row">
								<label for="monthPeriodFrom" th:text="#{experience.period}" class="form-label label-required">Period</label>
								<!-- CSS class 'exp-period' is defined at the top -->
								<div class="exp-period">
									<select id="monthPeriodFrom" name="monthPeriodFrom">
										<option value="0">Select</option>
										<option th:each="month : ${months}" th:value="${month.monthNumber}" th:text="${month.monthLabel}">Month</option>
									</select>
									<input type="text" name="yearPeriodFrom" maxlength="4"/>
									<span>&nbsp;-&nbsp;</span>
									<span id="experienceToday" th:text="#{experience.present}" class="invisible">Present</span>
									<select id="monthPeriodTo" name="monthPeriodTo">
										<option value="0">Select</option>
										<option th:each="month : ${months}" th:value="${month.monthNumber}" th:text="${month.monthLabel}">Month</option>
									</select>
									<input type="text" id="yearPeriodTo" name="yearPeriodTo" maxlength="4"/>
								</div>
							</div>
							<div class="form-row">
								<label class="form-label"></label>
								<div class="label-checkbox">
									<input type="checkbox" id="thisIsCurrentJob" th:field="*{current}"/>
									<label for="thisIsCurrentJob" th:text="#{experience.current}">Currently I'm working here</label>
									<script type="text/javascript">
										$("#thisIsCurrentJob").click(function() {
											if ($(this).is(":checked")) {
												$("#monthPeriodTo, #yearPeriodTo").hide();
												$("#experienceToday").show();
											} else {
												$("#experienceToday").hide();
												$("#monthPeriodTo, #yearPeriodTo").show();
											}
										});
									</script>
								</div>
							</div>
							<div class="form-row">
								<label for="experienceDescription" th:text="#{experience.description}" class="form-label">Description</label>
								<textarea id="experienceDescription" th:field="*{description}" rows="6" cols="60" placeholder="Description"></textarea>
							</div>
							<div class="form-row">
								<input type="submit" id="saveExperience" th:value="#{global.save}" value="Save"/>
								<input type="button" id="cancelAddingExperience" th:value="#{global.cancel}" value="Cancel"/>
								<script type="text/javascript">
									$("#cancelAddingExperience").click(function() {
										$("#newExperienceForm").addClass("invisible");
										$("#addNewExperience").removeClass("add-new-button-disabled").addClass("add-new-button");
									});
								</script>
							</div>
						</form>
					</div>
				</div>
				<div id="experiences" class="detail-list-view">
					<div th:each="exp : ${experienceList}" th:id="${#ids.seq('experience')}" class="detail-list-view-item">
						<header>
							<h3 th:text="${exp.function}">Software Architect</h3>
							<span th:text="${exp.companyName}">Microsoft</span>
						</header>
						<div class="detail-list-view-item-span">
							<span th:text="${exp.periodFromStr}">march 2012</span>
							<span>&#8722;</span>
							<span th:text="(${exp.current} ? #{experience.present} : ${exp.periodToStr})">october 2013</span>
							<span>(1 year 8 months)</span>
							<span>| Milan</span>
						</div>
						<p class="description-text-box" th:text="${exp.description}">
							Web/Enterprise Application development as Sales Solution and Order management.
							I had to develop particularly back-end components and domain model using Hibernate,
							JPA and some Spring modules as support. I've also participated in the Business layer
							development and Front-end layer building.
							Besides, has been adopted SCRUM approach as Agile methodology and Continuous
							Integration in order to release a stable version per sprint.
						</p>
					</div>
				</div>
			</div>

			<div id="languagesSection" class="data-section">
				<h2 th:text="#{language.title}">Languages</h2>
				<a id="addNewLanguage" href="javascript:void(0);" class="add-new-button">
					<span th:text="#{language.add}">Add new language</span>
				</a>
				<script th:inline="javascript">
					$("#addNewLanguage").click(function() {
						$(this).removeClass("add-new-button").addClass("add-new-button-disabled");
						$("#newLanguageForm").removeClass("invisible");
						$("#language").focus();
					});
				</script>
				<div id="newLanguageForm" class="invisible" style="position: relative;">
					<div class="form-container">
						<form th:action="@{/consultant/profile/addLanguage}" th:object="${languageModel}"
									method="post" action="profileDataRegistration.html">
							<div class="form-row">
								<label for="language" th:text="#{language.language}" class="form-label">Language</label>
								<input type="text" id="language" th:field="*{language}"/>
							</div>
							<div class="form-row">
								<label for="knowledge" th:text="#{language.knowledge}" class="form-label">Knowledge</label>
								<select id="knowledge" th:field="*{proficiency}">
									<option value="ELEMENTARY" th:text="#{language.elementary}">Elementary</option>
									<option value="LIMITED_WORKING" th:text="#{language.limited_working}">Limited working</option>
									<option value="PROFESSIONAL_WORKING" th:text="#{language.professional_working}">Professional working</option>
									<option value="FULL_PROFESSIONAL" th:text="#{language.full_professional}">Full professional</option>
									<option value="NATIVE_OR_BILINGUAL" th:text="#{language.native}">Native</option>
								</select>
							</div>
							<div class="form-row">
								<input type="submit" id="addLanguage" th:value="#{global.add}" value="Add"/>
								<input type="button" id="cancelAddingLanguage" th:value="#{global.cancel}" value="Cancel"/>
								<script type="text/javascript">
									$("#cancelAddingLanguage").click(function() {
										$("#newLanguageForm").addClass("invisible");
										$("#addNewLanguage").removeClass("add-new-button-disabled").addClass("add-new-button");
									});
								</script>
							</div>
						</form>
					</div>
				</div>
				<div id="languages" class="detail-list-view">
					<ul class="list-ul-details">
						<li th:each="lang : ${languageList}">
							<h3 th:text="${lang.language}">English</h3>
							<div class="detail-list-view-item-span">
								<span th:text="${lang.proficiency}">Elementary</span>
							</div>
						</li>
					</ul>
				</div>
			</div>

			<div id="skillsSection" class="data-section">
				<h2 th:text="#{skill.title}">Skills and experiences</h2>
				<a id="addNewSkill" href="javascript:void(0);" class="add-new-button">
					<span th:text="#{skill.add}">Add new skill</span>
				</a>
				<script type="text/javascript" th:inline="javascript">
					/*<![CDATA[*/
					$("#addNewSkill").click(function() {
						$(this).removeClass("add-new-button").addClass("add-new-button-disabled");
						$("#newSkillForm").removeClass("invisible");
						/*[+ var skillList = [[${skillList}]] +]*/
						/*[- */ var skillList = ["Java", "Maven", ".NET"]; /* -]*/
						for (var i = 0; i < skillList.length; i++) {
							var skillValue = skillList[i];
							/*[+
							 var skill = '<div class="skill-added">' +
							 '<span>' + skillValue + '</span>' +
							 '<span class="x-remove" onclick="removeSkill(this);">&#735;</span>' +
							 '<input type="hidden" name="skill" value="' + skillValue + '"/>' +
							 '</div>';
							 +]*/
							/*[- */
							var skill = '<div class="skill-added">' +
									'<span>' + skillValue + '</span>' +
									'<span class="x-remove" onclick="removeSkill(this);">&#735;</span>' +
									'<input type="hidden" name="skill" value="' + skillValue + '"/>' +
									'</div>';
							/* -]*/
							$("#skillsAdded").append(skill);
						}
						$("#skills").addClass("invisible");
						$("#skillValue").focus();
					});
					/*]]>*/
				</script>
				<div id="newSkillForm" class="invisible" style="position: relative;">
					<div class="form-container">
						<form th:action="@{/consultant/profile/addSkills}" method="post"
									action="profileDataRegistration.html">
							<div class="form-row">
								<input type="text" id="skillValue" style="width: 70%;"/>
								<input type="button" id="addSkill" th:value="#{global.add}" value="Add"/>
								<div id="skillsAdded"></div>
								<script type="text/javascript" th:inline="javascript">
									/*<![CDATA[*/
									$("#addSkill").click(function() {
										var skillValue = $("#skillValue").val();
										/*[+
										var skill = '<div class="skill-added">' +
												'<span>' + skillValue + '</span>' +
												'<span class="x-remove" onclick="removeSkill(this);">&#735;</span>' +
												'<input type="hidden" name="skill" value="' + skillValue + '"/>' +
												'</div>';
										+]*/
										/*[- */
										var skill = '<div class="skill-added">' +
												'<span>' + skillValue + '</span>' +
												'<span class="x-remove" onclick="removeSkill(this);">&#735;</span>' +
												'<input type="hidden" name="skill" value="' + skillValue + '"/>' +
												'</div>';
										/* -]*/
										$("#skillValue").val("").focus();
										$("#skillsAdded").append(skill);
									});
									function removeSkill(removeSpan) {
										$(removeSpan).parent().remove();
									}
									/*]]>*/
								</script>
							</div>
							<div class="form-row">
								<input type="submit" id="saveSkills" th:value="#{global.save}" value="Save"/>
								<input type="button" id="cancelAddingSkill" th:value="#{global.cancel}" value="Cancel"/>
								<script type="text/javascript">
									$("#cancelAddingSkill").click(function() {
										$("#newSkillForm").addClass("invisible");
										$("#addNewSkill").removeClass("add-new-button-disabled").addClass("add-new-button");
										$("#skillsAdded").children().remove();
										$("#skills").removeClass("invisible");
									});
								</script>
							</div>
						</form>
					</div>
				</div>
				<div id="skills" class="detail-list-view" style="padding-bottom: 15px;">
					<div th:each="skill : ${skillList}" class="skill-added">
						<span th:text="${skill}">DB Administrator</span>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</body>
</html>